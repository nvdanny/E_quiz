"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[198],{79183:(t,e,n)=>{n.d(e,{hG:()=>r,ho:()=>c,sr:()=>o,ul:()=>i,zi:()=>a});var s=n(58608);const r=(t,e,n)=>{const r={description:t.description,imageUrl:t.imageUrl,options:t.options,answer:t.answer},i={Authorization:"Bearer ".concat(n),"Content-Type":"application/json"};return s.A.post("/api/question/",r,{headers:i})},i=(t,e)=>{const n={Authorization:"Bearer ".concat(e)};return s.A.delete("/api/question/".concat(t),{headers:n})},c=t=>{const e={Authorization:"Bearer ".concat(t)};return s.A.get("/api/question/list",{headers:e})},o=async(t,e,n)=>{const r={id:e,description:t.description,imageUrl:t.imageUrl,options:t.options,answer:t.answer},i={Authorization:"Bearer ".concat(n),"Content-Type":"application/json"};return s.A.put("/api/question/".concat(e),r,{headers:i})},a=async(t,e)=>{const n={Authorization:"Bearer ".concat(e)};return s.A.get("/api/question/".concat(t),{headers:n})}},90198:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var s=n(65043),r=n(73216),i=(n(86213),n(80861)),c=n(25104),o=n(96105),a=n(81917),h=n(25917),l=n(44101),d=n(44227),u=n(64231),p=n(84709),x=n(10825),m=n(3805),g=n(79183),j=n(92719),C=n(79556),b=n(70579);const f=()=>{const{questionId:t}=(0,r.g)(),[e,n]=(0,s.useState)(""),[f,A]=(0,s.useState)([{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),[y,k]=(0,s.useState)(null),[U,v]=(0,s.useState)(localStorage.getItem("accessToken")),[w,q]=(0,s.useState)(!1),[T,B]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&S(t)}),[t]),(0,s.useEffect)((()=>{if(w){const t=setTimeout((()=>{q(!1)}),5e3);return()=>clearTimeout(t)}}),[w]);const S=async t=>{try{const e=(await(0,g.zi)(t,U)).data.msg.question;n(e.description),k(e.imageUrl||null);const s=(e.options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]).map(((t,n)=>({...t,isCorrect:t._id===e.answer._id})));A(s)}catch(e){B("L\u1ed7i khi t\u1ea3i th\xf4ng tin c\xe2u h\u1ecfi"),q(!0)}},z=(t,e)=>{const n=f.map(((n,s)=>s===t?{...n,[e.target.name]:"isCorrect"===e.target.name?e.target.checked:e.target.value}:n));A(n)},N=(0,b.jsxs)(j.A,{id:"popover-basic",children:[(0,b.jsx)(j.A.Header,{as:"h3",children:"H\u01b0\u1edbng d\u1eabn \u0111\u1ecbnh d\u1ea1ng"}),(0,b.jsxs)(j.A.Body,{children:[(0,b.jsx)("p",{children:"\u0110\u1ec3 paste c\xe2u h\u1ecfi, b\u1ea1n c\u1ea7n \u0111\u1ecbnh d\u1ea1ng nh\u01b0 sau:"}),(0,b.jsxs)("p",{children:["C\xe2u h\u1ecfi ho\u1eb7c m\xf4 t\u1ea3 ",(0,b.jsx)("br",{}),"A. \u0110\xe1p \xe1n 1 ",(0,b.jsx)("br",{}),"B. \u0110\xe1p \xe1n 2 ",(0,b.jsx)("br",{}),"C. \u0110\xe1p \xe1n 3 ",(0,b.jsx)("br",{}),"D. \u0110\xe1p \xe1n 4"]}),(0,b.jsx)("p",{children:"Ho\u1eb7c:"}),(0,b.jsxs)("p",{children:["C\xe2u h\u1ecfi ho\u1eb7c m\xf4 t\u1ea3 ",(0,b.jsx)("br",{}),"A. \u0110\xe1p \xe1n 1 B. \u0110\xe1p \xe1n 2 C. \u0110\xe1p \xe1n 3 D. \u0110\xe1p \xe1n 4"]})]})]});return(0,b.jsxs)(i.E,{children:[(0,b.jsx)(c.V,{children:t?"Ch\u1ec9nh s\u1eeda c\xe2u h\u1ecfi":"Th\xeam c\xe2u h\u1ecfi"}),(0,b.jsx)(o.W,{children:(0,b.jsxs)(a.q,{onSubmit:async s=>{if(s.preventDefault(),!(e.trim()?f.some((t=>!t.text.trim()))?(B("T\u1ea5t c\u1ea3 c\xe1c l\u1ef1a ch\u1ecdn ph\u1ea3i c\xf3 n\u1ed9i dung."),0):f.some((t=>t.isCorrect))||(B("Ph\u1ea3i ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t \u0111\xe1p \xe1n \u0111\xfang."),0):(B("\u0110\u1ec1 b\xe0i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."),0)))return void q(!0);const r=f.map((t=>({text:t.text,isCorrect:t.isCorrect}))),i=f.findIndex((t=>t.isCorrect)),c={description:e,imageUrl:y,options:r,answer:i};try{let e;e=t?await(0,g.sr)(c,t,U):await(0,g.hG)(c,y,U),200===e.status?(B(t?"C\u1eadp nh\u1eadt c\xe2u h\u1ecfi th\xe0nh c\xf4ng!":"Th\xeam c\xe2u h\u1ecfi m\u1edbi th\xe0nh c\xf4ng!"),q(!0)):(B("\u0110\u1ea7u v\xe0o kh\xf4ng h\u1ee3p l\u1ec7"),q(!0)),t||(n(""),A([{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),k(null))}catch(o){console.error(o),B("L\u1ed7i khi l\u01b0u c\xe2u h\u1ecfi"),q(!0)}},children:[w&&(0,b.jsx)(h.k,{color:T.startsWith("Failed")||T.startsWith("An error")?"danger":"success",children:T}),(0,b.jsxs)(l.s,{className:"mb-3",children:[(0,b.jsx)(d.U,{sm:"2",children:(0,b.jsx)("label",{htmlFor:"question-text",children:"\u0110\u1ec1 b\xe0i:"})}),(0,b.jsx)(d.U,{sm:"6",children:(0,b.jsx)(u.I,{id:"question-text",value:e,onChange:t=>n(t.target.value),rows:4})}),(0,b.jsxs)(d.U,{sm:"2",children:[(0,b.jsx)(p.Q,{color:"primary",onClick:()=>{const t=prompt("H\xe3y d\xe1n n\u1ed9i dung c\xe2u h\u1ecfi:");if(t){const e=/^(.*?)(?=(?:\s*[A-D]\.\s*))/s,s=t.match(e);if(s){const e=s[1].trim(),r=t.slice(s[0].length).trim(),i=/\s*[A-D]\.\s*([^A-D]*)/g,c=[];let o;for(;null!==(o=i.exec(r));)c.push({text:o[1].trim(),isCorrect:!1});n(e),A(c)}else B("N\u1ed9i dung d\xe1n v\xe0o kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng."),q(!0)}},children:"Import nhanh"}),(0,b.jsx)(C.A,{trigger:"click",placement:"right",overlay:N,children:(0,b.jsx)(p.Q,{color:"info",style:{marginLeft:"10px"},children:"?"})})]})]}),f.map(((t,e)=>(0,b.jsxs)(l.s,{className:"mb-3",children:[(0,b.jsx)(d.U,{sm:"2",children:(0,b.jsxs)("label",{htmlFor:"option-text-".concat(e),children:["\u0110\xe1p \xe1n ",e+1,":"]})}),(0,b.jsx)(d.U,{sm:"6",children:(0,b.jsx)(x.O,{id:"option-text-".concat(e),type:"text",name:"text",value:t.text,onChange:t=>z(e,t)})}),(0,b.jsx)(d.U,{sm:"2",className:"align-self-center",children:(0,b.jsx)(m.C,{id:"option-correct-".concat(e),label:"\u0110\xfang",name:"isCorrect",checked:t.isCorrect,onChange:t=>z(e,t)})}),(0,b.jsx)(d.U,{sm:"2",className:"align-self-center",children:(0,b.jsx)(p.Q,{type:"button",color:"danger",onClick:()=>(t=>{A(f.filter(((e,n)=>n!==t)))})(e),children:"X\xf3a"})})]},e))),(0,b.jsx)(l.s,{className:"mb-3",children:(0,b.jsx)(d.U,{sm:"12",children:(0,b.jsx)(p.Q,{type:"button",color:"primary",onClick:()=>{A([...f,{text:"",isCorrect:!1}])},children:"Th\xeam l\u1ef1a ch\u1ecdn"})})}),(0,b.jsx)(l.s,{className:"mb-3",children:(0,b.jsx)(d.U,{sm:"12",children:(0,b.jsx)(p.Q,{type:"submit",color:"success",children:t?"C\u1eadp nh\u1eadt":"L\u01b0u"})})})]})})]})}}}]);
//# sourceMappingURL=198.53e37310.chunk.js.map