"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[822],{8590:(e,t,n)=>{n.d(t,{CB:()=>o,Dt:()=>c,I$:()=>r,JZ:()=>i,Sv:()=>a,e9:()=>u,ou:()=>h,tR:()=>d,yB:()=>l});var s=n(8608);const o=async(e,t)=>{const n={title:e.title,description:e.description,duration:e.duration,start:e.start,end:e.end,questions:e.questions},o={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};return s.A.post("/api/exam/",n,{headers:o})},a=async(e,t,n)=>{const o={id:e,title:t.title,description:t.description,duration:t.duration,start:t.start,end:t.end,questions:t.questions,active:t.active},a={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};return s.A.put(`/api/exam/${e}`,o,{headers:a})},r=async(e,t)=>{const n={Authorization:`Bearer ${t}`};return s.A.get(`/api/exam/${e}`,{headers:n})},i=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/exam/list",{headers:t})},c=async(e,t)=>{const n={Authorization:`Bearer ${t}`};return s.A.delete(`/api/exam/${e}`,{headers:n})},l=async(e,t,n)=>{const o={id:e,active:t},a={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};return s.A.post("/api/exam/updateStatus",o,{headers:a})},d=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/submission/",{headers:t})},u=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/exam/",{headers:t})},h=async(e,t,n)=>{const o={id:t,answers:n},a={Authorization:`Bearer ${e}`,"Content-Type":"application/json"};return s.A.post("/api/submission/submit",o,{headers:a})}},3822:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var s=n(5043),o=n(5566),a=n(8155),r=n(8139),i=n.n(r),c=n(7852),l=n(579);const d={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},u=s.forwardRef(((e,t)=>{let{bsPrefix:n,position:s,containerPosition:o,className:a,as:r="div",...u}=e;return n=(0,c.oU)(n,"toast-container"),(0,l.jsx)(r,{ref:t,...u,className:i()(n,s&&d[s],o&&`position-${o}`,a)})}));u.displayName="ToastContainer";const h=u;var m=n(3240),p=n(8399),x=n(4830);const g={[p.ns]:"showing",[p.ze]:"showing show"},f=s.forwardRef(((e,t)=>(0,l.jsx)(x.A,{...e,ref:t,transitionClasses:g})));f.displayName="ToastFade";const v=f;var j=n(6618),y=n(5632);const b=s.createContext({onClose(){}}),A=s.forwardRef(((e,t)=>{let{bsPrefix:n,closeLabel:o="Close",closeVariant:a,closeButton:r=!0,className:d,children:u,...h}=e;n=(0,c.oU)(n,"toast-header");const m=(0,s.useContext)(b),p=(0,j.A)((e=>{null==m||null==m.onClose||m.onClose(e)}));return(0,l.jsxs)("div",{ref:t,...h,className:i()(n,d),children:[u,r&&(0,l.jsx)(y.A,{"aria-label":o,variant:a,onClick:p,"data-dismiss":"toast"})]})}));A.displayName="ToastHeader";const w=A,C=s.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:o="div",...a}=e;return s=(0,c.oU)(s,"toast-body"),(0,l.jsx)(o,{ref:t,className:i()(n,s),...a})}));C.displayName="ToastBody";const S=C,N=s.forwardRef(((e,t)=>{let{bsPrefix:n,className:o,transition:a=v,show:r=!0,animation:d=!0,delay:u=5e3,autohide:h=!1,onClose:p,onEntered:x,onExit:g,onExiting:f,onEnter:j,onEntering:y,onExited:A,bg:w,...C}=e;n=(0,c.oU)(n,"toast");const S=(0,s.useRef)(u),N=(0,s.useRef)(p);(0,s.useEffect)((()=>{S.current=u,N.current=p}),[u,p]);const B=(0,m.A)(),T=!(!h||!r),I=(0,s.useCallback)((()=>{T&&(null==N.current||N.current())}),[T]);(0,s.useEffect)((()=>{B.set(I,S.current)}),[B,I]);const $=(0,s.useMemo)((()=>({onClose:p})),[p]),E=!(!a||!d),k=(0,l.jsx)("div",{...C,ref:t,className:i()(n,o,w&&`bg-${w}`,!E&&(r?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,l.jsx)(b.Provider,{value:$,children:E&&a?(0,l.jsx)(a,{in:r,onEnter:j,onEntering:y,onEntered:x,onExit:g,onExiting:f,onExited:A,unmountOnExit:!0,children:k}):k})}));N.displayName="Toast";const B=Object.assign(N,{Body:S,Header:w});var T=n(3216),I=n(8590);const $=()=>{const e=(0,T.Zp)(),[t,n]=(0,s.useState)(),[r,i]=(0,s.useState)([]),[c,d]=(0,s.useState)({}),[u,m]=(0,s.useState)((()=>{const e=localStorage.getItem("timeFinish");return e?parseInt(e):null})),[p,x]=(0,s.useState)((()=>{const e=localStorage.getItem("timeFinish");return e&&parseInt(e)-Math.floor(Date.now()/1e3)>0?parseInt(e)-Math.floor(Date.now()/1e3):0})),[g,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(null==localStorage.getItem("accessToken"))return void e("/login");(async()=>{try{null!==localStorage.getItem("selectedAnswers")&&localStorage.removeItem("selectedAnswers");const t=localStorage.getItem("accessToken"),s=await(0,I.e9)(t);if(console.log(s.data.exam),n(s.data.exam),s.data.exam){const e=s.data.exam;if(i(e.questions),!u){const t=Math.floor(Date.now()/1e3)+e.duration-60;m(t),localStorage.setItem("timeFinish",t)}}else e("/exam/error1")}catch(t){console.error("Error fetching exams:",t)}})();const t=JSON.parse(localStorage.getItem("selectedAnswers")||"{}");d(t);const s=setInterval((async()=>{const e=Math.floor(Date.now()/1e3),t=u&&u>e?u-e:0;x(t),t>0?60===t&&j(!0):(clearInterval(s),j(!0))}),1e3);return()=>clearInterval(s)}),[e,u]);const y=()=>f(!1);return(0,l.jsxs)("div",{className:"container-fluid",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{id:"questions",className:"col-12 col-lg-8",children:(0,l.jsxs)("div",{id:"container",children:[(0,l.jsx)("h1",{children:"B\xe0i Thi"}),(0,l.jsx)("div",{id:"question-container",children:r.map(((e,t)=>(0,l.jsxs)("div",{className:"question",children:[(0,l.jsxs)("h5",{children:["C\xe2u ",t+1,": ",e.description]}),e.options.map(((e,n)=>(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",name:`q${t}`,value:e._id,checked:c[t]===n,onChange:()=>((e,t)=>{const n={...c,[e]:t};d(n),localStorage.setItem("selectedAnswers",JSON.stringify(n))})(t,n)}),String.fromCharCode(65+n),": ",e.text]},n))),(0,l.jsx)("br",{})]},t)))})]})}),(0,l.jsx)("div",{id:"sidebar",className:"col-12 col-lg-4",children:(0,l.jsxs)("div",{id:"sidebar-content",children:[(0,l.jsxs)("div",{id:"timer",children:[(0,l.jsx)("div",{id:"timer-text",children:"Th\u1eddi gian c\xf2n l\u1ea1i:"}),(0,l.jsx)("div",{id:"timer-time",children:`${Math.floor(p/60).toString().padStart(2,"0")}:${(p%60).toString().padStart(2,"0")}`})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{id:"saveButton",onClick:()=>{f(!0)},children:"N\u1ed8P B\xc0I"}),(0,l.jsx)("div",{className:"note",children:"*L\u01b0u \xfd: B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c ho\xe0n th\xe0nh b\xe0i thi c\u1ee7a m\xecnh trong th\u1eddi gian cho ph\xe9p, qu\xe1 th\u1eddi gian quy \u0111\u1ecbnh h\u1ec7 th\u1ed1ng s\u1ebd d\xf9ng b\xe0i l\xe0m c\u1ee7a b\u1ea1n v\xe0 n\u1ed9p b\xe0i"}),(0,l.jsx)("div",{id:"question-list",children:r.map(((e,t)=>(0,l.jsx)("div",{className:"question-number "+(void 0!==c[t]?"answered":""),onClick:()=>(e=>{document.querySelectorAll(".question")[e].scrollIntoView({behavior:"smooth"})})(t),children:t+1},t)))})]})})]}),(0,l.jsx)("button",{id:"scrollToBottomBtn",title:"Cu\u1ed9n xu\u1ed1ng cu\u1ed1i trang",onClick:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),children:"N\u1ed8P B\xc0I \u2193"}),(0,l.jsxs)(o.A,{show:g,onHide:y,children:[(0,l.jsx)(o.A.Header,{closeButton:!0,children:(0,l.jsx)(o.A.Title,{children:"X\xe1c Nh\u1eadn"})}),(0,l.jsx)(o.A.Body,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n n\u1ed9p b\xe0i kh\xf4ng?"}),(0,l.jsxs)(o.A.Footer,{children:[(0,l.jsx)(a.A,{variant:"secondary",onClick:y,children:"H\u1ee7y"}),(0,l.jsx)(a.A,{variant:"primary",onClick:async()=>{const n=localStorage.getItem("accessToken");try{0==(await(0,I.ou)(n,t._id,c)).data.success?e("/exam/error"):e("/exam/finish")}catch(s){console.log(s),e("/exam/error")}f(!1)},children:"X\xe1c Nh\u1eadn"})]})]}),(0,l.jsx)(h,{position:"top-end",className:"p-3",itemType:"info",children:(0,l.jsx)(B,{show:v,onClose:()=>j(!1),delay:5e3,autohide:!0,children:(0,l.jsx)(B.Body,{children:"S\u1eafp H\u1ebft gi\u1edd! B\u1ea1n n\xean n\u1ed9p b\xe0i ngay."})})})]})}},3240:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(5043),o=n(6723),a=n(9109);const r=2**31-1;function i(e,t,n){const s=n-Date.now();e.current=s<=r?setTimeout(t,s):setTimeout((()=>i(e,t,n)),r)}function c(){const e=(0,o.A)(),t=(0,s.useRef)();return(0,a.A)((()=>clearTimeout(t.current))),(0,s.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),o<=r?t.current=setTimeout(s,o):i(t,s,Date.now()+o))},clear:n,handleRef:t}}),[])}}}]);
//# sourceMappingURL=822.4f71bd78.chunk.js.map