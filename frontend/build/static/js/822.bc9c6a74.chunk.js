"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[822],{8590:(e,t,n)=>{n.d(t,{CB:()=>a,Dt:()=>c,I$:()=>i,JZ:()=>r,Sv:()=>o,e9:()=>u,ou:()=>h,tR:()=>d,yB:()=>l});var s=n(3565);const a=async(e,t)=>{const n={title:e.title,description:e.description,duration:e.duration,start:e.start,end:e.end,questions:e.questions},a={Authorization:`Bearer ${t}`,"Content-Type":"application/json"};return s.A.post("/api/exam/",n,{headers:a})},o=async(e,t,n)=>{const a={id:e,title:t.title,description:t.description,duration:t.duration,start:t.start,end:t.end,questions:t.questions,active:t.active},o={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};return s.A.put(`/api/exam/${e}`,a,{headers:o})},i=async(e,t)=>{const n={Authorization:`Bearer ${t}`};return s.A.get(`/api/exam/${e}`,{headers:n})},r=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/exam/list",{headers:t})},c=async(e,t)=>{const n={Authorization:`Bearer ${t}`};return s.A.delete(`/api/exam/${e}`,{headers:n})},l=async(e,t,n)=>{const a={id:e,active:t},o={Authorization:`Bearer ${n}`,"Content-Type":"application/json"};return s.A.post("/api/exam/updateStatus",a,{headers:o})},d=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/submission/",{headers:t})},u=async e=>{const t={Authorization:`Bearer ${e}`};return s.A.get("/api/exam/",{headers:t})},h=async(e,t,n)=>{const a={id:t,answers:n},o={Authorization:`Bearer ${e}`,"Content-Type":"application/json"};return s.A.post("/api/submission/submit",a,{headers:o})}},3822:(e,t,n)=>{n.r(t),n.d(t,{default:()=>$});var s=n(5043),a=n(5566),o=n(8155),i=n(8139),r=n.n(i),c=n(7852),l=n(579);const d={"top-start":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-end":"top-0 end-0","middle-start":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-end":"top-50 end-0 translate-middle-y","bottom-start":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-end":"bottom-0 end-0"},u=s.forwardRef(((e,t)=>{let{bsPrefix:n,position:s,containerPosition:a,className:o,as:i="div",...u}=e;return n=(0,c.oU)(n,"toast-container"),(0,l.jsx)(i,{ref:t,...u,className:r()(n,s&&d[s],a&&`position-${a}`,o)})}));u.displayName="ToastContainer";const h=u;var m=n(3240),x=n(8399),p=n(4830);const g={[x.ns]:"showing",[x.ze]:"showing show"},f=s.forwardRef(((e,t)=>(0,l.jsx)(p.A,{...e,ref:t,transitionClasses:g})));f.displayName="ToastFade";const v=f;var j=n(6618),y=n(5632);const b=s.createContext({onClose(){}}),A=s.forwardRef(((e,t)=>{let{bsPrefix:n,closeLabel:a="Close",closeVariant:o,closeButton:i=!0,className:d,children:u,...h}=e;n=(0,c.oU)(n,"toast-header");const m=(0,s.useContext)(b),x=(0,j.A)((e=>{null==m||null==m.onClose||m.onClose(e)}));return(0,l.jsxs)("div",{ref:t,...h,className:r()(n,d),children:[u,i&&(0,l.jsx)(y.A,{"aria-label":a,variant:o,onClick:x,"data-dismiss":"toast"})]})}));A.displayName="ToastHeader";const C=A,S=s.forwardRef(((e,t)=>{let{className:n,bsPrefix:s,as:a="div",...o}=e;return s=(0,c.oU)(s,"toast-body"),(0,l.jsx)(a,{ref:t,className:r()(n,s),...o})}));S.displayName="ToastBody";const w=S,N=s.forwardRef(((e,t)=>{let{bsPrefix:n,className:a,transition:o=v,show:i=!0,animation:d=!0,delay:u=5e3,autohide:h=!1,onClose:x,onEntered:p,onExit:g,onExiting:f,onEnter:j,onEntering:y,onExited:A,bg:C,...S}=e;n=(0,c.oU)(n,"toast");const w=(0,s.useRef)(u),N=(0,s.useRef)(x);(0,s.useEffect)((()=>{w.current=u,N.current=x}),[u,x]);const I=(0,m.A)(),B=!(!h||!i),T=(0,s.useCallback)((()=>{B&&(null==N.current||N.current())}),[B]);(0,s.useEffect)((()=>{I.set(T,w.current)}),[I,T]);const $=(0,s.useMemo)((()=>({onClose:x})),[x]),E=!(!o||!d),k=(0,l.jsx)("div",{...S,ref:t,className:r()(n,a,C&&`bg-${C}`,!E&&(i?"show":"hide")),role:"alert","aria-live":"assertive","aria-atomic":"true"});return(0,l.jsx)(b.Provider,{value:$,children:E&&o?(0,l.jsx)(o,{in:i,onEnter:j,onEntering:y,onEntered:p,onExit:g,onExiting:f,onExited:A,unmountOnExit:!0,children:k}):k})}));N.displayName="Toast";const I=Object.assign(N,{Body:w,Header:C});var B=n(3216),T=n(8590);const $=()=>{const e=(0,B.Zp)(),[t,n]=(0,s.useState)(null),[i,r]=(0,s.useState)([]),[c,d]=(0,s.useState)({}),[u,m]=(0,s.useState)((()=>{const e=localStorage.getItem("timeFinish");return e?parseInt(e):null})),[x,p]=(0,s.useState)((()=>{const e=localStorage.getItem("timeFinish");return e?Math.max(parseInt(e)-Math.floor(Date.now()/1e3),0):0})),[g,f]=(0,s.useState)(!1),[v,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!localStorage.getItem("accessToken"))return void e("/login");const t=localStorage.getItem("submitted");if(!t||"true"===t)return void e("/exam/finish");(async()=>{try{const t=localStorage.getItem("accessToken"),s=localStorage.getItem("examId");let a;if(s){a=(await(0,T.I$)(s,t)).data.msg.foundExam}else{a=(await(0,T.e9)(t)).data.exam}if(a){if(n(a),r(a.questions),localStorage.setItem("examId",a._id),!u){const e=Math.floor(Date.now()/1e3),t=e+60*a.duration;m(t),localStorage.setItem("timeFinish",t),p(t-e)}}else e("/exam/error1")}catch(t){console.error("Error fetching exams:",t),e("/exam/error")}})();const s=JSON.parse(localStorage.getItem("selectedAnswers")||"{}");d(s);const a=setInterval((async()=>{const e=Math.floor(Date.now()/1e3),t=u?Math.max(u-e,0):0;p(t),t<=0?(clearInterval(a),await y()):60===t&&j(!0)}),1e3);return()=>clearInterval(a)}),[e,u]);const y=async()=>{const n=localStorage.getItem("accessToken"),s=localStorage.getItem("examId");try{if(console.log(t),null!=s){(await(0,T.ou)(n,s,c)).data.success?(localStorage.setItem("submitted",!0),e("/exam/finish")):e("/exam/error")}}catch(a){console.log(a),"Time out"==a.response.data.msg&&(alert("\u0110\xe3 h\u1ebft gi\u1edd n\u1ed9p b\xe0i"),e("/exam/finish")),e("/exam/error")}f(!1)},b=()=>f(!1);return(0,l.jsxs)("div",{className:"container-fluid",children:[(0,l.jsxs)("div",{className:"row",children:[(0,l.jsx)("div",{id:"questions",className:"col-12 col-lg-8",children:(0,l.jsxs)("div",{id:"container",children:[t&&(0,l.jsx)("h1",{children:t.description}),(0,l.jsx)("div",{id:"question-container",children:i.map(((e,t)=>(0,l.jsxs)("div",{className:"question",children:[(0,l.jsxs)("h5",{children:["C\xe2u ",t+1,": ",e.description]}),e.imageUrl&&"/0"!==e.imageUrl&&(0,l.jsx)("div",{className:"question-image",children:(0,l.jsx)("img",{src:e.imageUrl,alt:`H\xecnh \u1ea3nh cho c\xe2u h\u1ecfi ${t+1}`})}),e.options.map(((e,n)=>(0,l.jsxs)("div",{className:"option",children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",name:`q${t}`,value:e._id,checked:c[t]===n,onChange:()=>((e,t)=>{const n={...c,[e]:t};d(n),localStorage.setItem("selectedAnswers",JSON.stringify(n))})(t,n)}),String.fromCharCode(65+n),": ",e.text]}),e.imageUrl&&(0,l.jsx)("div",{className:"option-image",children:(0,l.jsx)("img",{src:e.imageUrl,alt:`H\xecnh \u1ea3nh cho t\xf9y ch\u1ecdn ${String.fromCharCode(65+n)}`})})]},n))),(0,l.jsx)("br",{})]},t)))})]})}),(0,l.jsx)("div",{id:"sidebar",className:"col-12 col-lg-4",children:(0,l.jsxs)("div",{id:"sidebar-content",children:[(0,l.jsxs)("div",{id:"timer",children:[(0,l.jsx)("div",{id:"timer-text",children:"Th\u1eddi gian c\xf2n l\u1ea1i:"}),(0,l.jsx)("div",{id:"timer-time",children:`${Math.floor(x/60).toString().padStart(2,"0")}:${(x%60).toString().padStart(2,"0")}`})]}),(0,l.jsx)("hr",{}),(0,l.jsx)("div",{id:"saveButton",onClick:()=>{f(!0)},children:"N\u1ed8P B\xc0I"}),(0,l.jsx)("div",{className:"note",children:"*L\u01b0u \xfd: B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c ho\xe0n th\xe0nh b\xe0i thi c\u1ee7a m\xecnh trong th\u1eddi gian cho ph\xe9p, qu\xe1 th\u1eddi gian quy \u0111\u1ecbnh h\u1ec7 th\u1ed1ng s\u1ebd d\xf9ng b\xe0i l\xe0m c\u1ee7a b\u1ea1n v\xe0 n\u1ed9p b\xe0i"}),(0,l.jsx)("div",{id:"question-list",children:i.map(((e,t)=>(0,l.jsx)("div",{className:"question-number "+(void 0!==c[t]?"answered":""),onClick:()=>(e=>{document.querySelectorAll(".question")[e].scrollIntoView({behavior:"smooth"})})(t),children:t+1},t)))})]})})]}),(0,l.jsx)("button",{id:"scrollToBottomBtn",title:"Cu\u1ed9n xu\u1ed1ng cu\u1ed1i trang",onClick:()=>window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"}),children:"N\u1ed8P B\xc0I \u2193"}),(0,l.jsxs)(a.A,{show:g,onHide:b,children:[(0,l.jsx)(a.A.Header,{closeButton:!0,children:(0,l.jsx)(a.A.Title,{children:"X\xe1c Nh\u1eadn"})}),(0,l.jsx)(a.A.Body,{children:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n n\u1ed9p b\xe0i kh\xf4ng?"}),(0,l.jsxs)(a.A.Footer,{children:[(0,l.jsx)(o.A,{variant:"secondary",onClick:b,children:"H\u1ee7y"}),(0,l.jsx)(o.A,{variant:"primary",onClick:y,children:"X\xe1c Nh\u1eadn"})]})]}),(0,l.jsx)(h,{position:"top-end",className:"p-3",children:(0,l.jsx)(I,{show:v,onClose:()=>j(!1),delay:5e3,autohide:!0,children:(0,l.jsx)(I.Body,{children:"S\u1eafp H\u1ebft gi\u1edd! B\u1ea1n n\xean n\u1ed9p b\xe0i ngay."})})})]})}},3240:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(5043),a=n(6723),o=n(9109);const i=2**31-1;function r(e,t,n){const s=n-Date.now();e.current=s<=i?setTimeout(t,s):setTimeout((()=>r(e,t,n)),i)}function c(){const e=(0,a.A)(),t=(0,s.useRef)();return(0,o.A)((()=>clearTimeout(t.current))),(0,s.useMemo)((()=>{const n=()=>clearTimeout(t.current);return{set:function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e()&&(n(),a<=i?t.current=setTimeout(s,a):r(t,s,Date.now()+a))},clear:n,handleRef:t}}),[])}}}]);
//# sourceMappingURL=822.bc9c6a74.chunk.js.map