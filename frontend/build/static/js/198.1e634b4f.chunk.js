"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[198],{58608:(e,t,s)=>{s.d(t,{A:()=>i});const n=s(86213).A.create({baseURL:"http://localhost:5000",withCredentials:!0});n.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&r(),Promise.reject(e))));const r=()=>{localStorage.removeItem("accessToken"),localStorage.removeItem("userInfo"),localStorage.removeItem("timeLeft"),window.location.href="/login"},i=n},79183:(e,t,s)=>{s.d(t,{hG:()=>r,ho:()=>c,sr:()=>o,ul:()=>i,zi:()=>a});var n=s(58608);const r=(e,t,s)=>{const r={description:e.description,imageUrl:e.imageUrl,options:e.options,answer:e.answer},i={Authorization:"Bearer ".concat(s),"Content-Type":"application/json"};return n.A.post("/api/question/",r,{headers:i})},i=(e,t)=>{const s={Authorization:"Bearer ".concat(t)};return n.A.delete("/api/question/".concat(e),{headers:s})},c=e=>{const t={Authorization:"Bearer ".concat(e)};return n.A.get("/api/question/list",{headers:t})},o=async(e,t,s)=>{const r={id:t,description:e.description,imageUrl:e.imageUrl,options:e.options,answer:e.answer},i={Authorization:"Bearer ".concat(s),"Content-Type":"application/json"};return n.A.put("/api/question/".concat(t),r,{headers:i})},a=async(e,t)=>{const s={Authorization:"Bearer ".concat(t)};return n.A.get("/api/question/".concat(e),{headers:s})}},90198:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var n=s(65043),r=s(73216),i=(s(86213),s(80861)),c=s(25104),o=s(96105),a=s(81917),l=s(25917),h=s(44101),d=s(44227),u=s(64231),p=s(84709),m=s(10825),x=s(3805),g=s(79183),j=s(92719),C=s(79556),f=s(70579);const b=()=>{const{questionId:e}=(0,r.g)(),[t,s]=(0,n.useState)(""),[b,A]=(0,n.useState)([{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),[k,y]=(0,n.useState)(null),[U,v]=(0,n.useState)(localStorage.getItem("accessToken")),[w,S]=(0,n.useState)(!1),[q,T]=(0,n.useState)("");(0,n.useEffect)((()=>{e&&I(e)}),[e]),(0,n.useEffect)((()=>{if(w){const e=setTimeout((()=>{S(!1)}),5e3);return()=>clearTimeout(e)}}),[w]);const I=async e=>{try{const t=(await(0,g.zi)(e,U)).data.msg.question;s(t.description),y(t.imageUrl||null);const n=(t.options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]).map(((e,s)=>({...e,isCorrect:e._id===t.answer._id})));A(n)}catch(t){T("L\u1ed7i khi t\u1ea3i th\xf4ng tin c\xe2u h\u1ecfi"),S(!0)}},B=(e,t)=>{const s=b.map(((s,n)=>n===e?{...s,[t.target.name]:"isCorrect"===t.target.name?t.target.checked:t.target.value}:s));A(s)},z=(0,f.jsxs)(j.A,{id:"popover-basic",children:[(0,f.jsx)(j.A.Header,{as:"h3",children:"H\u01b0\u1edbng d\u1eabn \u0111\u1ecbnh d\u1ea1ng"}),(0,f.jsxs)(j.A.Body,{children:[(0,f.jsx)("p",{children:"\u0110\u1ec3 paste c\xe2u h\u1ecfi, b\u1ea1n c\u1ea7n \u0111\u1ecbnh d\u1ea1ng nh\u01b0 sau:"}),(0,f.jsxs)("p",{children:["C\xe2u h\u1ecfi ho\u1eb7c m\xf4 t\u1ea3 ",(0,f.jsx)("br",{}),"A. \u0110\xe1p \xe1n 1 ",(0,f.jsx)("br",{}),"B. \u0110\xe1p \xe1n 2 ",(0,f.jsx)("br",{}),"C. \u0110\xe1p \xe1n 3 ",(0,f.jsx)("br",{}),"D. \u0110\xe1p \xe1n 4"]}),(0,f.jsx)("p",{children:"Ho\u1eb7c:"}),(0,f.jsxs)("p",{children:["C\xe2u h\u1ecfi ho\u1eb7c m\xf4 t\u1ea3 ",(0,f.jsx)("br",{}),"A. \u0110\xe1p \xe1n 1 B. \u0110\xe1p \xe1n 2 C. \u0110\xe1p \xe1n 3 D. \u0110\xe1p \xe1n 4"]})]})]});return(0,f.jsxs)(i.E,{children:[(0,f.jsx)(c.V,{children:e?"Ch\u1ec9nh s\u1eeda c\xe2u h\u1ecfi":"Th\xeam c\xe2u h\u1ecfi"}),(0,f.jsx)(o.W,{children:(0,f.jsxs)(a.q,{onSubmit:async n=>{if(n.preventDefault(),!(t.trim()?b.some((e=>!e.text.trim()))?(T("T\u1ea5t c\u1ea3 c\xe1c l\u1ef1a ch\u1ecdn ph\u1ea3i c\xf3 n\u1ed9i dung."),0):b.some((e=>e.isCorrect))||(T("Ph\u1ea3i ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t \u0111\xe1p \xe1n \u0111\xfang."),0):(T("\u0110\u1ec1 b\xe0i kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."),0)))return void S(!0);const r=b.map((e=>({text:e.text,isCorrect:e.isCorrect}))),i=b.findIndex((e=>e.isCorrect)),c={description:t,imageUrl:k,options:r,answer:i};try{let t;t=e?await(0,g.sr)(c,e,U):await(0,g.hG)(c,k,U),200===t.status?(T(e?"C\u1eadp nh\u1eadt c\xe2u h\u1ecfi th\xe0nh c\xf4ng!":"Th\xeam c\xe2u h\u1ecfi m\u1edbi th\xe0nh c\xf4ng!"),S(!0)):(T("\u0110\u1ea7u v\xe0o kh\xf4ng h\u1ee3p l\u1ec7"),S(!0)),e||(s(""),A([{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1},{text:"",isCorrect:!1}]),y(null))}catch(o){console.error(o),T("L\u1ed7i khi l\u01b0u c\xe2u h\u1ecfi"),S(!0)}},children:[w&&(0,f.jsx)(l.k,{color:q.startsWith("Failed")||q.startsWith("An error")?"danger":"success",children:q}),(0,f.jsxs)(h.s,{className:"mb-3",children:[(0,f.jsx)(d.U,{sm:"2",children:(0,f.jsx)("label",{htmlFor:"question-text",children:"\u0110\u1ec1 b\xe0i:"})}),(0,f.jsx)(d.U,{sm:"6",children:(0,f.jsx)(u.I,{id:"question-text",value:t,onChange:e=>s(e.target.value),rows:4})}),(0,f.jsxs)(d.U,{sm:"2",children:[(0,f.jsx)(p.Q,{color:"primary",onClick:()=>{const e=prompt("H\xe3y d\xe1n n\u1ed9i dung c\xe2u h\u1ecfi:");if(e){const t=/^(.*?)(?=(?:\s*[A-D]\.\s*))/s,n=e.match(t);if(n){const t=n[1].trim(),r=e.slice(n[0].length).trim(),i=/\s*[A-D]\.\s*([^A-D]*)/g,c=[];let o;for(;null!==(o=i.exec(r));)c.push({text:o[1].trim(),isCorrect:!1});s(t),A(c)}else T("N\u1ed9i dung d\xe1n v\xe0o kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng."),S(!0)}},children:"Import nhanh"}),(0,f.jsx)(C.A,{trigger:"click",placement:"right",overlay:z,children:(0,f.jsx)(p.Q,{color:"info",style:{marginLeft:"10px"},children:"?"})})]})]}),b.map(((e,t)=>(0,f.jsxs)(h.s,{className:"mb-3",children:[(0,f.jsx)(d.U,{sm:"2",children:(0,f.jsxs)("label",{htmlFor:"option-text-".concat(t),children:["\u0110\xe1p \xe1n ",t+1,":"]})}),(0,f.jsx)(d.U,{sm:"6",children:(0,f.jsx)(m.O,{id:"option-text-".concat(t),type:"text",name:"text",value:e.text,onChange:e=>B(t,e)})}),(0,f.jsx)(d.U,{sm:"2",className:"align-self-center",children:(0,f.jsx)(x.C,{id:"option-correct-".concat(t),label:"\u0110\xfang",name:"isCorrect",checked:e.isCorrect,onChange:e=>B(t,e)})}),(0,f.jsx)(d.U,{sm:"2",className:"align-self-center",children:(0,f.jsx)(p.Q,{type:"button",color:"danger",onClick:()=>(e=>{A(b.filter(((t,s)=>s!==e)))})(t),children:"X\xf3a"})})]},t))),(0,f.jsx)(h.s,{className:"mb-3",children:(0,f.jsx)(d.U,{sm:"12",children:(0,f.jsx)(p.Q,{type:"button",color:"primary",onClick:()=>{A([...b,{text:"",isCorrect:!1}])},children:"Th\xeam l\u1ef1a ch\u1ecdn"})})}),(0,f.jsx)(h.s,{className:"mb-3",children:(0,f.jsx)(d.U,{sm:"12",children:(0,f.jsx)(p.Q,{type:"submit",color:"success",children:e?"C\u1eadp nh\u1eadt":"L\u01b0u"})})})]})})]})}}}]);
//# sourceMappingURL=198.1e634b4f.chunk.js.map